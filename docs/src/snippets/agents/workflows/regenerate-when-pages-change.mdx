{/* Auto-generated mdx file. Do not edit! */}
{/* @sniptest testers/agents/workflows/regenerate-when-pages-change.py */}

```python regenerate-when-pages-change.py
# Old function failing
try:
    old_function.run()
except Exception:
    print("Function broken, regenerating...")

    with client.Session() as session:
        # Use agent to figure out new function
        agent = client.Agent(session=session)
        result = agent.run(task=original_task_description)

        if result.success:
            # Generate new function
```
