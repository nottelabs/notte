---
title: Agent to Workflow Conversion
description: Convert agent executions into reusable workflow code
---

Convert successful agent runs into deterministic workflow code that can be executed faster and cheaper than agents.

## Overview

After an agent completes a task, you can extract the steps as workflow code:

```python
from notte_sdk import NotteClient

client = NotteClient()

with client.Session() as session:
    agent = client.Agent(session=session)
    result = agent.run(task="Navigate to pricing page and extract plans")

    if result.success:
        # Convert to workflow code
        workflow_code = agent.workflow.code()
        print(workflow_code.python_script)
```

## Why Convert to Workflows?

| Aspect | Agent | Workflow |
|--------|-------|----------|
| **Execution** | AI decides each step | Predefined steps |
| **Speed** | Slower (LLM reasoning) | Faster (direct execution) |
| **Cost** | Higher (LLM tokens) | Lower (actions only) |
| **Reliability** | Can vary | Deterministic |
| **Adaptability** | Handles changes | Breaks if page changes |

**Use workflows when:**
- The task is well-defined and repeatable
- Page structure is stable
- Speed and cost matter
- You need predictable execution

## Getting Workflow Code

### As Python Script

Get executable Python code:

```python
agent = client.Agent(session=session)
result = agent.run(task="Login and navigate to dashboard")

if result.success:
    # Get workflow code
    code = agent.workflow.code(as_workflow=True)

    print(code.python_script)
```

Example output:

```python
from notte_sdk import NotteClient, actions

client = NotteClient()

with client.Session() as session:
    # Step 1: Navigate to login page
    session.execute(actions.Goto(url="https://example.com/login"))

    # Step 2: Fill email field
    session.execute(actions.Fill(
        selector="input[name='email']",
        value="user@example.com"
    ))

    # Step 3: Fill password field
    session.execute(actions.Fill(
        selector="input[name='password']",
        value="********"
    ))

    # Step 4: Click login button
    session.execute(actions.Click(selector="button[type='submit']"))

    # Step 5: Wait for dashboard
    session.execute(actions.Goto(url="https://example.com/dashboard"))
```

### As Workflow Object

Create a reusable workflow:

```python
agent = client.Agent(session=session)
result = agent.run(task="Extract product data")

if result.success:
    # Create workflow from agent
    workflow = agent.workflow.create()

    print(f"Created workflow: {workflow.workflow_id}")

    # Run workflow later
    workflow_result = workflow.run()
```

## Running Workflows

### Execute Generated Code

Copy and run the generated Python:

```python
# Generated from agent
from notte_sdk import NotteClient, actions

client = NotteClient()

with client.Session() as session:
    session.execute(actions.Goto(url="https://example.com"))
    session.execute(actions.Click(selector="button.search"))
    session.execute(actions.Fill(
        selector="input[name='query']",
        value="laptop"
    ))
    data = session.scrape(instructions="Extract product names")

print(data)
```

### Use Workflow API

Run via the workflow endpoint:

```python
# Create workflow from successful agent
workflow = agent.workflow.create()

# Run multiple times
for query in ["laptop", "phone", "tablet"]:
    result = workflow.run(parameters={"query": query})
    print(result)
```

## Use Cases

### 1. Prototyping with Agents

Use agents to figure out the workflow, then convert:

```python
# Phase 1: Prototype with agent
agent = client.Agent(session=session)
result = agent.run(task="Find all products under $100")

if result.success:
    # Phase 2: Convert to workflow for production
    code = agent.workflow.code()

    # Save for production use
    with open("production_workflow.py", "w") as f:
        f.write(code.python_script)
```

### 2. Scheduled Tasks

Convert one-time agent runs to scheduled workflows:

```python
# Manual run to figure out the task
agent = client.Agent(session=session)
result = agent.run(task="Extract daily price changes")

# Convert to workflow
workflow = agent.workflow.create()

# Schedule to run daily (via API or console)
# workflow.schedule(cron="0 9 * * *")
```

### 3. Cost Optimization

Run agents once, then use cheaper workflows:

```python
# One-time: Use agent to solve the task ($0.20)
agent = client.Agent(session=session)
result = agent.run(task="Complex data extraction")

# Recurring: Use workflow ($0.05 per run)
workflow = agent.workflow.create()

# Run 100 times - save $15 vs running agent each time
for i in range(100):
    workflow.run()
```

### 4. Testing Variations

Create workflow templates from agents:

```python
# Base workflow from agent
agent = client.Agent(session=session)
result = agent.run(task="Search and extract results")

code = agent.workflow.code()

# Modify code for variations
# - Different search queries
# - Different extraction logic
# - Different URLs
```

## Customizing Generated Code

### Add Parameters

Make workflows reusable with parameters:

```python
# Agent-generated base code
code = agent.workflow.code()

# Customize with parameters
customized_code = f"""
def extract_products(search_query: str, max_results: int = 10):
    {code.python_script}
"""
```

### Add Error Handling

Enhance with production-ready error handling:

```python
# Agent-generated code
base_code = agent.workflow.code()

enhanced_code = f"""
from notte_sdk import NotteClient, actions
import logging

def run_workflow():
    client = NotteClient()
    try:
        with client.Session() as session:
            {base_code.python_script}
            return {{"success": True, "data": result}}
    except Exception as e:
        logging.error(f"Workflow failed: {{e}}")
        return {{"success": False, "error": str(e)}}
"""
```

### Optimize Selectors

Review and improve generated selectors:

```python
# Generated code might use:
session.execute(actions.Click(selector="div.container > button:nth-child(3)"))

# Optimize to:
session.execute(actions.Click(selector="button[data-testid='submit']"))
```

## Best Practices

### 1. Test Generated Workflows

Always test before production:

```python
# Generate workflow
code = agent.workflow.code()

# Test in fresh session
with client.Session() as session:
    exec(code.python_script)
    # Verify it works
```

### 2. Document the Source

Track which agent generated the workflow:

```python
workflow = agent.workflow.create()

# Add metadata
metadata = {
    "agent_id": agent.agent_id,
    "original_task": "Extract product data",
    "created_at": datetime.now().isoformat(),
    "success_rate": result.success
}

# Save with workflow
```

### 3. Version Control

Store workflows in git:

```python
# Save workflow code
code = agent.workflow.code()

workflow_path = Path("workflows/extract_products.py")
workflow_path.write_text(code.python_script)

# Commit to git
# git add workflows/extract_products.py
# git commit -m "Add product extraction workflow from agent run"
```

### 4. Monitor Workflow Success

Track if workflows continue to work:

```python
from datetime import datetime

def run_monitored_workflow():
    try:
        workflow = client.workflows.get("workflow_id")
        result = workflow.run()

        if result.success:
            log_success(datetime.now())
        else:
            alert_failure(result.error)

    except Exception as e:
        # Workflow broken - maybe page changed?
        # Time to re-run agent and regenerate
        alert_workflow_broken(e)
```

### 5. Regenerate When Pages Change

When workflows break, use agents to update:

```python
# Old workflow failing
try:
    old_workflow.run()
except Exception as e:
    print("Workflow broken, regenerating...")

    # Use agent to figure out new workflow
    agent = client.Agent(session=session)
    result = agent.run(task=original_task_description)

    if result.success:
        # Generate new workflow
        new_workflow = agent.workflow.create()
        print(f"New workflow created: {new_workflow.workflow_id}")
```

## Limitations

Workflows work best for:
- ✅ Stable, unchanging pages
- ✅ Deterministic tasks
- ✅ Known sequences of actions

Workflows are not suitable for:
- ❌ Pages that change frequently
- ❌ Tasks requiring adaptation
- ❌ Complex decision-making

When pages change or tasks become complex, revert to agents.

## Next Steps

<CardGroup cols={2}>
  <Card title="Workflows Concept" icon="sitemap" href="/concepts/workflows">
    Learn more about workflows
  </Card>

  <Card title="Actions" icon="hand-pointer" href="/sdk-reference/manual/session">
    Available session actions
  </Card>

  <Card title="Agent Configuration" icon="sliders" href="/features/agents/configuration">
    Optimize agent runs
  </Card>

  <Card title="Functions" icon="bolt" href="/product/functions">
    Deploy workflows as APIs
  </Card>
</CardGroup>
